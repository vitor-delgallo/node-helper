const VDFileHelper=require("./file.min.js"),os=require("os"),fs=require("fs"),pidusage=require("pidusage");class VDSOHelper{static async getServerStatus(){const e=os.uptime(),s=process.uptime(),i=os.loadavg()[0],t=os.cpus().length,o=i>t,r=await pidusage(process.pid),u=os.totalmem(),l=os.freemem(),m=u-l,p=m/u*100;return{system:{memory:{total:VDFileHelper.humanFileSize(u),used:VDFileHelper.humanFileSize(m),free:VDFileHelper.humanFileSize(l),usage:p.toFixed(2)+" %"},cpu:{loadAverage:i.toFixed(2),cpuCount:t,overloaded:o},uptime:(e/60/60).toFixed(2)+" hours"},process:{cpu:{usage:r.cpu.toFixed(2)+" %"},memory:{used:VDFileHelper.humanFileSize(r.memory),usage:(r.memory/u*100).toFixed(2)+" %"},uptime:(s/60).toFixed(2)+" minutes"}}}static getSystemCpuUsage(){return new Promise((e=>{const s=os.cpus();setTimeout((()=>{const i=os.cpus();let t=0,o=0;for(let e=0;e<s.length;e++){const r=s[e].times,u=i[e].times,l=u.idle-r.idle;t+=l,o+=u.user-r.user+(u.nice-r.nice)+(u.sys-r.sys)+(u.irq-r.irq)+l}e(100*(1-t/o))}),500)}))}}module.exports=VDSOHelper;